<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUAL - Test Coverage Dashboard (Tester View)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:#0f172a;color:#e2e8f0;min-height:100vh}
        .dash{max-width:1440px;margin:0 auto;padding:24px}
        header{text-align:center;margin-bottom:28px}
        header h1{font-size:2rem;background:linear-gradient(135deg,#38bdf8,#818cf8,#c084fc);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:800}
        header p{color:#94a3b8;margin-top:6px;font-size:.95rem}
        .kpi-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));gap:14px;margin-bottom:22px}
        .kpi{background:linear-gradient(135deg,#1e293b,#1e2740);border:1px solid #334155;border-radius:14px;padding:18px;text-align:center;position:relative;overflow:hidden}
        .kpi::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
        .kpi.blue::before{background:linear-gradient(90deg,#38bdf8,#818cf8)}
        .kpi.green::before{background:linear-gradient(90deg,#34d399,#22c55e)}
        .kpi.yellow::before{background:linear-gradient(90deg,#fbbf24,#f59e0b)}
        .kpi.purple::before{background:linear-gradient(90deg,#a78bfa,#c084fc)}
        .kpi.cyan::before{background:linear-gradient(90deg,#22d3ee,#06b6d4)}
        .kpi.rose::before{background:linear-gradient(90deg,#fb7185,#f43f5e)}
        .kpi .num{font-size:2rem;font-weight:800;margin:6px 0 4px}
        .kpi .num.blue{color:#38bdf8}.kpi .num.green{color:#34d399}.kpi .num.yellow{color:#fbbf24}
        .kpi .num.purple{color:#a78bfa}.kpi .num.cyan{color:#22d3ee}.kpi .num.rose{color:#fb7185}
        .kpi .label{font-size:.75rem;color:#94a3b8;text-transform:uppercase;letter-spacing:.5px}
        .grid2{display:grid;grid-template-columns:repeat(auto-fit,minmax(420px,1fr));gap:18px;margin-bottom:18px}
        .grid3{display:grid;grid-template-columns:repeat(auto-fit,minmax(310px,1fr));gap:18px;margin-bottom:18px}
        .card{background:linear-gradient(135deg,#1e293b,#1e2740);border:1px solid #334155;border-radius:14px;padding:20px}
        .card h3{font-size:1rem;color:#cbd5e1;margin-bottom:14px;display:flex;align-items:center;gap:8px}
        .card h3 span{font-size:1.1rem}
        canvas{max-height:320px}
        .tbl-wrap{overflow-x:auto;max-height:520px;overflow-y:auto}
        table{width:100%;border-collapse:collapse;font-size:.82rem}
        th{background:#0f172a;color:#94a3b8;text-transform:uppercase;font-size:.72rem;letter-spacing:.5px;padding:10px 12px;position:sticky;top:0;z-index:2;text-align:left}
        td{padding:9px 12px;border-bottom:1px solid #1e293b;white-space:nowrap}
        tr:hover td{background:#1e293b80}
        .badge{padding:3px 10px;border-radius:50px;font-size:.72rem;font-weight:600;display:inline-block}
        .badge-done{background:#065f4620;color:#34d399;border:1px solid #34d39940}
        .badge-todo{background:#1e40af20;color:#60a5fa;border:1px solid #60a5fa40}
        .badge-progress{background:#92400e20;color:#fbbf24;border:1px solid #fbbf2440}
        .badge-cancelled{background:#be123c20;color:#fb7185;border:1px solid #fb718540}
        .section-title{font-size:1.1rem;color:#e2e8f0;margin:24px 0 14px;padding-left:12px;border-left:3px solid #818cf8}
        .timestamp{text-align:center;color:#475569;font-size:.75rem;margin-top:24px;padding:16px}
        .coverage-bar{display:flex;height:26px;border-radius:8px;overflow:hidden;margin:8px 0}
        .coverage-bar div{display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:700}
        .legend-item{display:inline-flex;align-items:center;gap:6px;margin:4px 8px;font-size:.78rem;color:#94a3b8}
        .legend-dot{width:10px;height:10px;border-radius:3px;display:inline-block}
        .avatar{width:28px;height:28px;border-radius:50%;vertical-align:middle;margin-right:8px;border:2px solid #334155}
        .tester-name{font-weight:600;color:#e2e8f0}
        .tester-email{font-size:.72rem;color:#64748b}
        .bar-cell{min-width:140px}
        .mini-bar{display:flex;height:8px;border-radius:4px;overflow:hidden;background:#0f172a}
        .mini-bar div{height:100%}
        .focus-area{font-size:.72rem;color:#94a3b8;max-width:200px;white-space:normal;line-height:1.4}
        .num-cell{text-align:center;font-weight:700;font-size:.9rem}
        .num-cell.green{color:#34d399}.num-cell.yellow{color:#fbbf24}.num-cell.blue{color:#60a5fa}
        .total-cell{text-align:center;font-weight:800;color:#e2e8f0}
        .pct-cell{text-align:center;font-weight:700}
        .filter-bar{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
        .filter-bar input{background:#1e293b;border:1px solid #334155;color:#e2e8f0;padding:8px 14px;border-radius:8px;font-size:.85rem;outline:none;width:260px}
        .filter-bar input:focus{border-color:#818cf8}
        .filter-bar select{background:#1e293b;border:1px solid #334155;color:#e2e8f0;padding:8px 14px;border-radius:8px;font-size:.85rem;outline:none}
    </style>
</head>
<body>
<div class="dash">
    <header>
        <h1>QUAL Project - Test Coverage by Tester</h1>
        <p>Quality Repository &mdash; Blend Production Environment &mdash; JIRA Project: QUAL</p>
    </header>

    <div class="kpi-row" id="kpiRow"></div>

    <!-- Overall Coverage Bar -->
    <div class="card" style="margin-bottom:18px">
        <h3><span>üìä</span> Overall Test Execution Coverage</h3>
        <div id="coverageBar"></div>
        <div style="display:flex;flex-wrap:wrap;justify-content:center;margin-top:10px" id="coverageLegend"></div>
    </div>

    <!-- Tester Charts -->
    <div class="grid2">
        <div class="card">
            <h3><span>üë•</span> Tests Completed by Tester (Recent)</h3>
            <canvas id="testerDoneChart"></canvas>
        </div>
        <div class="card">
            <h3><span>‚ö°</span> Active Workload by Tester</h3>
            <canvas id="testerWorkloadChart"></canvas>
        </div>
    </div>

    <div class="grid2">
        <div class="card">
            <h3><span>üéØ</span> Completion Rate by Tester (%)</h3>
            <canvas id="completionChart"></canvas>
        </div>
        <div class="card">
            <h3><span>üè∑Ô∏è</span> Tester Focus Areas</h3>
            <canvas id="focusChart"></canvas>
        </div>
    </div>

    <div class="grid3">
        <div class="card">
            <h3><span>üìà</span> Status Distribution</h3>
            <canvas id="statusChart"></canvas>
        </div>
        <div class="card">
            <h3><span>ü§ñ</span> Automation Coverage</h3>
            <canvas id="autoChart"></canvas>
        </div>
        <div class="card">
            <h3><span>üîÑ</span> Regression Ownership</h3>
            <canvas id="regressionChart"></canvas>
        </div>
    </div>

    <!-- Tester Scorecard Table -->
    <div class="section-title">Tester Scorecard - Individual Performance</div>
    <div class="card">
        <div class="filter-bar">
            <input type="text" id="testerSearch" placeholder="Search tester name..." oninput="filterTesters()">
            <select id="sortBy" onchange="filterTesters()">
                <option value="done-desc">Sort: Most Completed</option>
                <option value="total-desc">Sort: Most Total</option>
                <option value="pct-desc">Sort: Highest Completion %</option>
                <option value="ip-desc">Sort: Most In Progress</option>
                <option value="name-asc">Sort: Name A-Z</option>
            </select>
        </div>
        <div class="tbl-wrap">
            <table>
                <thead><tr>
                    <th>Tester</th>
                    <th style="text-align:center">Done</th>
                    <th style="text-align:center">In Progress</th>
                    <th style="text-align:center">To Do</th>
                    <th style="text-align:center">Total</th>
                    <th style="text-align:center">Completion %</th>
                    <th>Progress</th>
                    <th>Focus Areas</th>
                </tr></thead>
                <tbody id="testerTableBody"></tbody>
            </table>
        </div>
    </div>

    <!-- Active Tests per Tester -->
    <div class="section-title">Active In-Progress Tests - by Tester</div>
    <div class="card">
        <div class="tbl-wrap">
            <table>
                <thead><tr><th>Tester</th><th>Key</th><th>Summary</th><th>Status</th></tr></thead>
                <tbody id="activeTable"></tbody>
            </table>
        </div>
    </div>

    <!-- Recently Completed -->
    <div class="section-title">Recently Completed Tests - by Tester</div>
    <div class="card">
        <div class="tbl-wrap">
            <table>
                <thead><tr><th>Tester</th><th>Key</th><th>Summary</th><th>Status</th></tr></thead>
                <tbody id="doneTable"></tbody>
            </table>
        </div>
    </div>

    <div class="timestamp">
        Data sourced from JIRA (blendlabs.atlassian.net) &bull; Project: QUAL &bull; Generated: <span id="ts"></span>
    </div>
</div>

<script>
// ===== TESTER DATA FROM JIRA =====
const testers = [
    {
        name: 'Prathiksha Rajendra Koteshwara',
        avatar: 'https://secure.gravatar.com/avatar/93e7662918e8297328beca6e550ec8c1?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FPK-0.png',
        email: 'prathiksha-rajendra@blend.com',
        done: 16, inProgress: 3, todo: 4,
        focus: ['FMB/Deposit Accounts', 'DA V12', 'LFCU', 'E2E Workflows']
    },
    {
        name: 'Nandini Satanur',
        avatar: 'https://secure.gravatar.com/avatar/7f3eca7ea3915551e47fc51b42762187?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FNS-1.png',
        email: 'nandini-sathanur@blend.com',
        done: 8, inProgress: 1, todo: 1,
        focus: ['Citizens CC', 'BMO PL/DMS', 'Consumer Banking', 'Named Accounts']
    },
    {
        name: 'Medapati Neela Manikanta Reddy',
        avatar: 'https://secure.gravatar.com/avatar/9ef598fbd2edfc7c6656bb71f8904e6a?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FMR-3.png',
        email: 'manikanta-reddy@blend.com',
        done: 4, inProgress: 2, todo: 22,
        focus: ['Teachers FCU', 'Beneficiary IDV', 'Joint Flows', 'LandMark DA']
    },
    {
        name: 'Mohammed Noor Pasha',
        avatar: 'https://secure.gravatar.com/avatar/df64adc1d12d984877cc3eea6b19dfd9?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FMP-1.png',
        email: 'mohammed-noorpasha@blend.com',
        done: 8, inProgress: 0, todo: 0,
        focus: ['Public API Docs', 'Feature Flags', 'ITP Date Validation']
    },
    {
        name: 'Varun Ravindra',
        avatar: 'https://secure.gravatar.com/avatar/68afadc76bb6c52d5178ccc222b82bb6?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FVR-6.png',
        email: 'varun-ravindra@blend.com',
        done: 5, inProgress: 4, todo: 7,
        focus: ['DCCU', 'BCU', 'Credit Cards', 'SEG Verification']
    },
    {
        name: 'Barathi Myilsami',
        avatar: 'https://secure.gravatar.com/avatar/9fac414dfa8265a77789d97734373e29?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FBM-1.png',
        email: 'bmyilsami@blend.com',
        done: 4, inProgress: 1, todo: 0,
        focus: ['Verification', 'PNC', 'Income Reports', 'SSO Login']
    },
    {
        name: 'Archana Bangar',
        avatar: 'https://secure.gravatar.com/avatar/902134ecc75fc5053321622530c77165?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAB-4.png',
        email: 'archana-bangar@blend.com',
        done: 0, inProgress: 6, todo: 2,
        focus: ['GenAI', 'Automation Framework', 'Playwright Migration', 'Pipeline Integration']
    },
    {
        name: 'Prakhar Supekar',
        avatar: 'https://secure.gravatar.com/avatar/2d43062a5815e0bfd5a99ebe046eeeae?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FPS-0.png',
        email: 'prakhar-supekar@blend.com',
        done: 1, inProgress: 2, todo: 3,
        focus: ['Rapid Home Lending', 'HELOC', 'FloodZone', 'Lender Guided Flow']
    },
    {
        name: 'Abhirupa Chakraborty',
        avatar: 'https://secure.gravatar.com/avatar/60ae56af370857adb88636a6bc8780d9?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAC-5.png',
        email: 'abhirupa-chakraborty@blend.com',
        done: 1, inProgress: 4, todo: 3,
        focus: ['BSR Beta', 'DA V12 Automation', 'Playwright', 'Regression Execution']
    },
    {
        name: 'Shivakumar Y',
        avatar: 'https://secure.gravatar.com/avatar/bed654715cd2f9d712c2754c6db50a97?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSY-6.png',
        email: 'shivakumar-y@blend.com',
        done: 0, inProgress: 6, todo: 0,
        focus: ['CP Regression Beta', 'Auto Loan V5', 'Mabl', 'Template Testing']
    },
    {
        name: 'Mahak Dhawan',
        avatar: 'https://secure.gravatar.com/avatar/5cd295573b7f455764ce275d4f36b673?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FMD-4.png',
        email: 'mdhawan@blend.com',
        done: 0, inProgress: 2, todo: 0,
        focus: ['Navy RHL', 'Corelogic FloodZone', 'Rapid Home Lending']
    },
    {
        name: 'Aditi Jain',
        avatar: 'https://secure.gravatar.com/avatar/03ca534e0eb79fc47d2fa5e1f4037211?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAJ-5.png',
        email: 'aditi-jain@blend.com',
        done: 0, inProgress: 2, todo: 0,
        focus: ['CP Regression Beta', 'Vehicle Loan V5', 'Mabl']
    },
    {
        name: 'Divya Selvaraj',
        avatar: 'https://secure.gravatar.com/avatar/e74dff4bb2eadda11a775f265218c137?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FDS-4.png',
        email: 'dselvaraj@blend.com',
        done: 0, inProgress: 2, todo: 0,
        focus: ['Pipeline Regression', 'Change Protocol', 'Stress Testing']
    },
    {
        name: 'Balakrishnan Soundararajan',
        avatar: 'https://secure.gravatar.com/avatar/e9dde34a34fa71d2ffc62e941d833f35?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FBS-6.png',
        email: 'bsoundararajan@blend.com',
        done: 0, inProgress: 3, todo: 0,
        focus: ['WF HELOC Automation', 'Hard Pull', 'Blend Income']
    },
    {
        name: 'Shrinidhi Patil',
        avatar: 'https://secure.gravatar.com/avatar/67318eff2dab7cb5e438848aec5624d7?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-6.png',
        email: 'shrinidhi-patil@blend.com',
        done: 0, inProgress: 2, todo: 0,
        focus: ['Client DA Upgrade', 'Solution Engineering']
    },
    {
        name: 'Amrutha K',
        avatar: 'https://secure.gravatar.com/avatar/c0a1d326088b65e9b28ec5bba9e1757d?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAK-4.png',
        email: 'amrutha-k@blend.com',
        done: 0, inProgress: 0, todo: 3,
        focus: ['Regression Execution']
    },
    {
        name: 'Makam Dheeraj',
        avatar: 'https://secure.gravatar.com/avatar/8900beb6721e3329643de403e15a82ac?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FMD-4.png',
        email: 'makam-dheeraj@blend.com',
        done: 0, inProgress: 0, todo: 3,
        focus: ['Regression Execution']
    },
    {
        name: 'Syed Shabaz',
        avatar: 'https://secure.gravatar.com/avatar/71cb0b11e929b605830766069beb45b8?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSS-5.png',
        email: 'syed-shabaz@blend.com',
        done: 0, inProgress: 0, todo: 3,
        focus: ['Regression Execution']
    },
    {
        name: 'Paresh Gandhi',
        avatar: 'https://secure.gravatar.com/avatar/c087b85c894c7c9425091cf070c738a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FPG-4.png',
        email: 'pgandhi@blend.com',
        done: 0, inProgress: 1, todo: 0,
        focus: ['TD Bank HE1.0', 'Audit Login Regression']
    },
    {
        name: 'Ramesh Babu Gundumenu',
        avatar: 'https://secure.gravatar.com/avatar/8106418522af2f353204f1869ac888c9?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FRG-5.png',
        email: 'rameshbabu-gundumenu@blend.com',
        done: 0, inProgress: 1, todo: 0,
        focus: ['Minor Account', 'Astra Funding']
    },
    {
        name: 'Darshan Garje',
        avatar: 'https://secure.gravatar.com/avatar/ec85a3218bba75d68c1b834f17c0fc82?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FDG-1.png',
        email: 'darshan-garje@blend.com',
        done: 0, inProgress: 1, todo: 0,
        focus: ['Group Branding', 'Borrower Emails']
    },
    {
        name: 'Azim Saiyed',
        avatar: 'https://secure.gravatar.com/avatar/26952a46ba04475483f07a40fee6155a?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FAS-0.png',
        email: 'asaiyed@blend.com',
        done: 0, inProgress: 1, todo: 0,
        focus: ['BSR', 'Zoom/Twilio Stability']
    },
    {
        name: 'Dhaney Palanisamy',
        avatar: 'https://secure.gravatar.com/avatar/0dd7e5a04d21740db81357f2ae4d497b?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FDP-0.png',
        email: 'dhaney-palanisamy@blend.com',
        done: 0, inProgress: 1, todo: 0,
        focus: ['X-Ray JIRA', 'Test Management']
    }
];

// In-progress issue details
const activeIssues = [
    { tester:'Varun Ravindra', key:'QUAL-10759', summary:'BCU - Simply checking product removal in UI and Deeplink', status:'In Progress' },
    { tester:'Varun Ravindra', key:'QUAL-10699', summary:'[DCCU] - PL: Capture branch and employee ID for banker apps', status:'In Progress' },
    { tester:'Varun Ravindra', key:'QUAL-10698', summary:'DCCU - VL - Capture branch and employee ID for banker apps', status:'In Progress' },
    { tester:'Varun Ravindra', key:'QUAL-10697', summary:'[DCCU] - CC: Capture branch and employee ID for banker apps', status:'In Progress' },
    { tester:'Medapati Neela Manikanta Reddy', key:'QUAL-10307', summary:'TFCU - Product Based testing Set 1', status:'In Progress' },
    { tester:'Medapati Neela Manikanta Reddy', key:'QUAL-9536', summary:'LandMark DA-v11 - E2E full regression test', status:'In Progress' },
    { tester:'Archana Bangar', key:'QUAL-10196', summary:'GenAI - Login Page (E2E)', status:'Dev in Progress' },
    { tester:'Archana Bangar', key:'QUAL-9891', summary:'GenAI Hackathon - Story to Stable', status:'In Progress' },
    { tester:'Archana Bangar', key:'QUAL-9841', summary:'Robust framework setup for Config Platform Test Cases', status:'In Progress' },
    { tester:'Archana Bangar', key:'QUAL-9840', summary:'Integrate Testing Pipeline To Dev Pipeline', status:'In Progress' },
    { tester:'Archana Bangar', key:'QUAL-9839', summary:'Migrate Caliper Tests to Playwright', status:'In Progress' },
    { tester:'Archana Bangar', key:'QUAL-9838', summary:'Migrate Mabl Tests to Playwright', status:'In Progress' },
    { tester:'Prakhar Supekar', key:'QUAL-10146', summary:'HELOC - Additional Flood Questions', status:'In Progress' },
    { tester:'Prakhar Supekar', key:'QUAL-10094', summary:'Rapid: Lender Guided Flow', status:'In Progress' },
    { tester:'Mahak Dhawan', key:'QUAL-10144', summary:'Navy-RHL Phase 1 - Jan Rollout', status:'In Progress' },
    { tester:'Mahak Dhawan', key:'QUAL-9953', summary:'Corelogic FloodZone API', status:'In Progress' },
    { tester:'Nandini Satanur', key:'QUAL-9863', summary:'Named Accounts: CB Deep Dive Part 2', status:'In Progress' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-9814', summary:'E2E Workflow - CDs Only - Debit Card', status:'In Progress' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-9813', summary:'E2E Workflow - Savings Only - Debit Card', status:'In Progress' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-9812', summary:'E2E Workflow - Checking Only - Debit Card', status:'In Progress' },
    { tester:'Abhirupa Chakraborty', key:'QUAL-8643', summary:'BSR Beta - Participants - No Identity Proofing Required', status:'In Progress' },
    { tester:'Abhirupa Chakraborty', key:'QUAL-8632', summary:'BSR Beta - Failed IDV', status:'In Progress' },
    { tester:'Abhirupa Chakraborty', key:'QUAL-8631', summary:'BSR Beta - Resubmit IDV', status:'In Progress' },
    { tester:'Abhirupa Chakraborty', key:'QUAL-8626', summary:'BSR Beta - Mock IDV Failed option (Unhappy path)', status:'In Progress' },
    { tester:'Shivakumar Y', key:'QUAL-8803', summary:'E2E Test execution - lender side V5 auto loan template', status:'In Progress' },
    { tester:'Shivakumar Y', key:'QUAL-8802', summary:'E2E Test - Auto Loan V5 for Park National Bank', status:'In Progress' },
    { tester:'Shivakumar Y', key:'QUAL-8541', summary:'CP Regression Beta - Consumer Credit Card V5 (Journey & CL-CL)', status:'In Progress' },
    { tester:'Shivakumar Y', key:'QUAL-8540', summary:'CP Regression Beta - Consumer Credit Card V5 (Alloy & CL-CL)', status:'In Progress' },
    { tester:'Shivakumar Y', key:'QUAL-8536', summary:'CP Regression Beta - Personal Loan V5 (Alloy Legacy)', status:'In Progress' },
    { tester:'Shivakumar Y', key:'QUAL-8535', summary:'CP Regression Beta - Personal Loan V5 (Alloy Journey)', status:'In Progress' },
    { tester:'Balakrishnan Soundararajan', key:'QUAL-6879', summary:'WF HELOC Lender Side Happy Path Automation', status:'In Progress' },
    { tester:'Balakrishnan Soundararajan', key:'QUAL-6878', summary:'On Submit hard pull - Non sharing Borrower Automation', status:'In Progress' },
    { tester:'Balakrishnan Soundararajan', key:'QUAL-6871', summary:'Blend Income & TWN (Credit Gate) Tests', status:'In Progress' },
    { tester:'Divya Selvaraj', key:'QUAL-8810', summary:'Pipeline page regression after search client package upgrade', status:'In Progress' },
    { tester:'Divya Selvaraj', key:'QUAL-6960', summary:'Change protocol testing', status:'In Progress' },
    { tester:'Aditi Jain', key:'QUAL-8528', summary:'CP Regression Beta - Vehicle Loan V5 (Alloy Legacy)', status:'In Progress' },
    { tester:'Aditi Jain', key:'QUAL-8524', summary:'CP Regression Beta - Vehicle Loan V5 (Alloy Journey)', status:'In Progress' },
];

// Recently done issue details
const doneIssuesList = [
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10761', summary:'FMB - Validate consent to contact is not on e signature card', status:'Done' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10760', summary:'Test for DA-1601 - Joint app co-applicant recognition', status:'Done' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10755', summary:'Test for DA-1553 - Display redacted eSig card', status:'Done' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10715', summary:'FMB - Validate email when co app rejected', status:'Done' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10714', summary:'FMB - Validate login link sent to co-applicant', status:'Done' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10709', summary:'DA V12 - Application Summary page on banker side', status:'Done' },
    { tester:'Prathiksha Rajendra Koteshwara', key:'QUAL-10545', summary:'FMB - Validate disclosures with joint app + beneficiaries', status:'Done' },
    { tester:'Nandini Satanur', key:'QUAL-10296', summary:'Citizens CC: Accertify API Timeout happy flow redirect', status:'Done' },
    { tester:'Nandini Satanur', key:'QUAL-10295', summary:'Citizens CC: One click - Update Request Logic', status:'Done' },
    { tester:'Nandini Satanur', key:'QUAL-10293', summary:'C1B DA: Account booking failed on IDV manual approval', status:'Done' },
    { tester:'Nandini Satanur', key:'QUAL-10220', summary:'BMO DMS PL/CPB E2E Regression - IDV/Credit Decisions', status:'Done' },
    { tester:'Barathi Myilsami', key:'QUAL-10767', summary:'Test For Multiple income report Generation', status:'Done' },
    { tester:'Barathi Myilsami', key:'QUAL-10730', summary:'Test for Borrower UI Consent Text update', status:'Done' },
    { tester:'Barathi Myilsami', key:'QUAL-10689', summary:'Test PNC Employee Toggle updation', status:'Done' },
    { tester:'Medapati Neela Manikanta Reddy', key:'QUAL-10753', summary:'Teachers FCU - Joint flow Uses cases set 1', status:'Done' },
    { tester:'Medapati Neela Manikanta Reddy', key:'QUAL-10728', summary:'Teachers FCU - DAO Beneficiary IDV', status:'Done' },
    { tester:'Medapati Neela Manikanta Reddy', key:'QUAL-10619', summary:'Teachers FCU Nov Regression Set', status:'Done' },
    { tester:'Mohammed Noor Pasha', key:'QUAL-10230', summary:'Validate "Try It" execution with custom question from API docs', status:'Done' },
    { tester:'Mohammed Noor Pasha', key:'QUAL-10229', summary:'Validate custom question fields, data types, and required flags', status:'Done' },
    { tester:'Mohammed Noor Pasha', key:'QUAL-10228', summary:'Public API documentation includes custom question support', status:'Done' },
    { tester:'Varun Ravindra', key:'QUAL-10679', summary:'DCCU - Test Plan Creation for Credit Card', status:'Done' },
    { tester:'Varun Ravindra', key:'QUAL-10678', summary:'DCCU - Test Plan Creation for Auto Loans', status:'Done' },
    { tester:'Varun Ravindra', key:'QUAL-10280', summary:'BCU - Verification of Standard SEG - Lifepoint Health', status:'Done' },
    { tester:'Abhirupa Chakraborty', key:'QUAL-10316', summary:'DA V12 Consumer Joint CD 6 Months Approve', status:'Done' },
    { tester:'Prakhar Supekar', key:'QUAL-10685', summary:'RHL: Move Debt Consolidation to Pre Offer', status:'Done' },
];

// ===== COLORS =====
const C = {
    blue:'#38bdf8', green:'#34d399', yellow:'#fbbf24', purple:'#a78bfa',
    cyan:'#22d3ee', rose:'#fb7185', orange:'#fb923c', indigo:'#818cf8',
    teal:'#2dd4bf', pink:'#f472b6', lime:'#a3e635', emerald:'#10b981',
    sky:'#7dd3fc', amber:'#fcd34d', fuchsia:'#e879f9', red:'#f87171',
    violet:'#8b5cf6', stone:'#a8a29e', slate:'#94a3b8', zinc:'#a1a1aa',
    warm:'#fbbf24', cool:'#67e8f9'
};
const PALETTE = [C.blue,C.green,C.yellow,C.purple,C.cyan,C.rose,C.orange,C.indigo,C.teal,C.pink,C.lime,C.emerald,C.sky,C.amber,C.fuchsia,C.red,C.violet,C.stone,C.slate,C.zinc,C.warm,C.cool];

// ===== KPI =====
const totalTesters = testers.length;
const totalDone = testers.reduce((s,t)=>s+t.done,0);
const totalIP = testers.reduce((s,t)=>s+t.inProgress,0);
const totalTodo = testers.reduce((s,t)=>s+t.todo,0);
const totalAll = totalDone+totalIP+totalTodo;
const overallPct = ((totalDone/totalAll)*100).toFixed(1);

const kpis = [
    {label:'Active Testers', num: totalTesters, cls:'blue'},
    {label:'Tests Completed', num: totalDone, cls:'green'},
    {label:'In Progress', num: totalIP, cls:'yellow'},
    {label:'Backlog', num: totalTodo, cls:'cyan'},
    {label:'Total Tracked', num: totalAll, cls:'purple'},
    {label:'Completion Rate', num: overallPct+'%', cls:'rose'},
];
document.getElementById('kpiRow').innerHTML = kpis.map(k=>
    `<div class="kpi ${k.cls}"><div class="label">${k.label}</div><div class="num ${k.cls}">${k.num}</div></div>`
).join('');

// Coverage bar
const barItems = [
    {label:'Done',count:totalDone,color:C.green},
    {label:'In Progress',count:totalIP,color:C.yellow},
    {label:'To Do',count:totalTodo,color:C.blue},
];
document.getElementById('coverageBar').innerHTML =
    `<div class="coverage-bar">${barItems.map(b=>{
        const p=(b.count/totalAll*100);
        return p>0?`<div style="width:${p}%;background:${b.color};color:#0f172a">${p>4?p.toFixed(1)+'%':''}</div>`:'';
    }).join('')}</div>`;
document.getElementById('coverageLegend').innerHTML = barItems.map(b=>
    `<span class="legend-item"><span class="legend-dot" style="background:${b.color}"></span>${b.label}: ${b.count}</span>`
).join('');

// ===== CHARTS =====
Chart.defaults.color='#94a3b8';Chart.defaults.borderColor='#1e293b';
Chart.defaults.font.family="'Segoe UI',system-ui,sans-serif";

// Top testers by done (top 12)
const topDone = [...testers].sort((a,b)=>b.done-a.done).filter(t=>t.done>0).slice(0,12);
new Chart(document.getElementById('testerDoneChart'),{
    type:'bar',
    data:{
        labels:topDone.map(t=>t.name.split(' ').slice(0,2).join(' ')),
        datasets:[{
            label:'Completed',
            data:topDone.map(t=>t.done),
            backgroundColor:topDone.map((_,i)=>PALETTE[i%PALETTE.length]),
            borderWidth:0, borderRadius:6
        }]
    },
    options:{
        indexAxis:'y',
        scales:{x:{beginAtZero:true,grid:{color:'#1e293b'}},y:{grid:{display:false}}},
        plugins:{legend:{display:false}}
    }
});

// Workload chart (stacked bar)
const topWorkload = [...testers].sort((a,b)=>(b.done+b.inProgress+b.todo)-(a.done+a.inProgress+a.todo)).slice(0,12);
new Chart(document.getElementById('testerWorkloadChart'),{
    type:'bar',
    data:{
        labels:topWorkload.map(t=>t.name.split(' ').slice(0,2).join(' ')),
        datasets:[
            {label:'Done',data:topWorkload.map(t=>t.done),backgroundColor:C.green},
            {label:'In Progress',data:topWorkload.map(t=>t.inProgress),backgroundColor:C.yellow},
            {label:'To Do',data:topWorkload.map(t=>t.todo),backgroundColor:C.blue},
        ]
    },
    options:{
        indexAxis:'y',
        scales:{x:{stacked:true,grid:{color:'#1e293b'}},y:{stacked:true,grid:{display:false}}},
        plugins:{legend:{labels:{usePointStyle:true,pointStyleWidth:10,padding:12}}}
    }
});

// Completion rate chart
const withTotal = testers.filter(t=>(t.done+t.inProgress+t.todo)>1).map(t=>({...t,total:t.done+t.inProgress+t.todo,pct:t.done/(t.done+t.inProgress+t.todo)*100})).sort((a,b)=>b.pct-a.pct).slice(0,12);
new Chart(document.getElementById('completionChart'),{
    type:'bar',
    data:{
        labels:withTotal.map(t=>t.name.split(' ').slice(0,2).join(' ')),
        datasets:[{
            data:withTotal.map(t=>+t.pct.toFixed(1)),
            backgroundColor:withTotal.map(t=>t.pct>=80?C.green:t.pct>=50?C.yellow:C.rose),
            borderWidth:0, borderRadius:6
        }]
    },
    options:{
        indexAxis:'y',
        scales:{x:{beginAtZero:true,max:100,grid:{color:'#1e293b'},ticks:{callback:v=>v+'%'}},y:{grid:{display:false}}},
        plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>ctx.raw+'%'}}}
    }
});

// Focus area radar (top 5 testers)
const top5 = [...testers].sort((a,b)=>(b.done+b.inProgress+b.todo)-(a.done+a.inProgress+a.todo)).slice(0,5);
const allFocus = [...new Set(top5.flatMap(t=>t.focus))].slice(0,8);
new Chart(document.getElementById('focusChart'),{
    type:'radar',
    data:{
        labels:allFocus.map(f=>f.length>18?f.slice(0,18)+'..':f),
        datasets:top5.map((t,i)=>({
            label:t.name.split(' ').slice(0,2).join(' '),
            data:allFocus.map(f=>t.focus.includes(f)?t.done+t.inProgress+t.todo:0),
            backgroundColor:PALETTE[i]+'20',
            borderColor:PALETTE[i],
            borderWidth:2,
            pointBackgroundColor:PALETTE[i]
        }))
    },
    options:{
        scales:{r:{beginAtZero:true,grid:{color:'#1e293b'},angleLines:{color:'#1e293b'},pointLabels:{color:'#94a3b8',font:{size:10}}}},
        plugins:{legend:{position:'bottom',labels:{usePointStyle:true,pointStyleWidth:10,padding:10,font:{size:10}}}}
    }
});

// Status doughnut
new Chart(document.getElementById('statusChart'),{
    type:'doughnut',
    data:{labels:['Done','In Progress','To Do'],datasets:[{data:[totalDone,totalIP,totalTodo],backgroundColor:[C.green,C.yellow,C.blue],borderWidth:0}]},
    options:{cutout:'60%',plugins:{legend:{position:'bottom',labels:{padding:12,usePointStyle:true,pointStyleWidth:10}}}}
});

// Automation doughnut
const autoTesters = testers.filter(t=>t.focus.some(f=>['Automation Framework','Playwright Migration','Playwright','Mabl','Automation','GenAI'].includes(f)));
const autoNames = autoTesters.map(t=>t.name.split(' ').slice(0,2).join(' '));
const autoWorkload = autoTesters.map(t=>t.done+t.inProgress+t.todo);
new Chart(document.getElementById('autoChart'),{
    type:'doughnut',
    data:{labels:autoNames,datasets:[{data:autoWorkload,backgroundColor:autoTesters.map((_,i)=>PALETTE[i]),borderWidth:0}]},
    options:{cutout:'60%',plugins:{legend:{position:'bottom',labels:{padding:12,usePointStyle:true,pointStyleWidth:10}}}}
});

// Regression ownership
const regressionTesters = ['Abhirupa Chakraborty','Amrutha K','Makam Dheeraj','Syed Shabaz','Shivakumar Y','Archana Bangar'];
const regData = regressionTesters.map(n=>{const t=testers.find(t=>t.name===n);return t?t.done+t.inProgress+t.todo:0;});
new Chart(document.getElementById('regressionChart'),{
    type:'pie',
    data:{labels:regressionTesters.map(n=>n.split(' ').slice(0,2).join(' ')),datasets:[{data:regData,backgroundColor:regressionTesters.map((_,i)=>PALETTE[i+4]),borderWidth:0}]},
    options:{plugins:{legend:{position:'bottom',labels:{padding:10,usePointStyle:true,pointStyleWidth:10,font:{size:10}}}}}
});

// ===== TESTER SCORECARD TABLE =====
let sortedTesters = [...testers];

function renderTesterTable(list) {
    document.getElementById('testerTableBody').innerHTML = list.map((t,i)=>{
        const total = t.done+t.inProgress+t.todo;
        const pct = total>0?((t.done/total)*100).toFixed(1):0;
        const pctColor = pct>=80?C.green:pct>=50?C.yellow:C.rose;
        const donePct = total>0?(t.done/total*100):0;
        const ipPct = total>0?(t.inProgress/total*100):0;
        const todoPct = total>0?(t.todo/total*100):0;
        return `<tr>
            <td><img src="${t.avatar}" class="avatar" alt="""><span class="tester-name">${t.name}</span><br><span class="tester-email" style="margin-left:36px">${t.email}</span></td>
            <td class="num-cell green">${t.done}</td>
            <td class="num-cell yellow">${t.inProgress}</td>
            <td class="num-cell blue">${t.todo}</td>
            <td class="total-cell">${total}</td>
            <td class="pct-cell" style="color:${pctColor}">${pct}%</td>
            <td class="bar-cell"><div class="mini-bar"><div style="width:${donePct}%;background:${C.green}"></div><div style="width:${ipPct}%;background:${C.yellow}"></div><div style="width:${todoPct}%;background:${C.blue}"></div></div></td>
            <td class="focus-area">${t.focus.join(', ')}</td>
        </tr>`;
    }).join('');
}

function filterTesters(){
    const q = document.getElementById('testerSearch').value.toLowerCase();
    const sort = document.getElementById('sortBy').value;
    let list = [...testers];
    if(q) list = list.filter(t=>t.name.toLowerCase().includes(q)||t.email.toLowerCase().includes(q));
    switch(sort){
        case 'done-desc': list.sort((a,b)=>b.done-a.done); break;
        case 'total-desc': list.sort((a,b)=>(b.done+b.inProgress+b.todo)-(a.done+a.inProgress+a.todo)); break;
        case 'pct-desc': list.sort((a,b)=>{const at=a.done+a.inProgress+a.todo;const bt=b.done+b.inProgress+b.todo;return(bt?b.done/bt:0)-(at?a.done/at:0);}); break;
        case 'ip-desc': list.sort((a,b)=>b.inProgress-a.inProgress); break;
        case 'name-asc': list.sort((a,b)=>a.name.localeCompare(b.name)); break;
    }
    renderTesterTable(list);
}

renderTesterTable([...testers].sort((a,b)=>b.done-a.done));

// Active issues table
function statusBadge(s){
    const m={'Done':'badge-done','To Do':'badge-todo','In Progress':'badge-progress','Dev in Progress':'badge-progress'};
    return `<span class="badge ${m[s]||'badge-todo'}">${s}</span>`;
}

document.getElementById('activeTable').innerHTML = activeIssues.map(i=>
    `<tr><td class="tester-name" style="font-size:.82rem">${i.tester}</td><td><a href="https://blendlabs.atlassian.net/browse/${i.key}" target="_blank" style="color:${C.blue};text-decoration:none">${i.key}</a></td><td style="white-space:normal;max-width:380px">${i.summary}</td><td>${statusBadge(i.status)}</td></tr>`
).join('');

document.getElementById('doneTable').innerHTML = doneIssuesList.map(i=>
    `<tr><td class="tester-name" style="font-size:.82rem">${i.tester}</td><td><a href="https://blendlabs.atlassian.net/browse/${i.key}" target="_blank" style="color:${C.blue};text-decoration:none">${i.key}</a></td><td style="white-space:normal;max-width:380px">${i.summary}</td><td>${statusBadge(i.status)}</td></tr>`
).join('');

document.getElementById('ts').textContent = new Date().toLocaleString();
</script>
</body>
</html>
